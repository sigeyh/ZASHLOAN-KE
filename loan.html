<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checking Limit - Zash Loan</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-red-700 via-red-600 to-red-400 min-h-screen flex items-center justify-center text-white font-sans">

  <div id="loader" class="text-center space-y-4">
    <img src="zashlogo.jpeg" alt="Zash Logo" class="w-16 h-16 mx-auto rounded-full"/>
    <h2 class="text-xl font-semibold">Contacting server...</h2>
    <p class="text-lg font-mono" id="percent">0%</p>
    <div class="w-64 mx-auto bg-white bg-opacity-20 rounded-full h-3">
      <div id="progressBar" class="bg-yellow-400 h-3 rounded-full transition-all duration-200"></div>
    </div>
  </div>

  <div id="result" class="hidden text-center space-y-6">
    <img src="zashlogo.jpeg" alt="Zash Logo" class="w-16 h-16 mx-auto rounded-full"/>
    <h2 class="text-2xl font-bold">Congratulations!</h2>
    <p class="text-lg">You are eligible for a loan up to:</p>
    <p class="text-3xl font-extrabold text-yellow-300" id="limitAmount"></p>
    <button onclick="proceed()" class="bg-yellow-400 text-black px-6 py-2 rounded font-semibold hover:bg-yellow-300 transition">
      Continue
    </button>
  </div>

  <script>
    let progress = 0;
    const percent = document.getElementById("percent");
    const progressBar = document.getElementById("progressBar");
    const loader = document.getElementById("loader");
    const result = document.getElementById("result");
    const limitAmount = document.getElementById("limitAmount");

    const interval = setInterval(() => {
      if (progress >= 100) {
        clearInterval(interval);
        loader.classList.add("hidden");
        result.classList.remove("hidden");

        // Random loan limit between 2500 and 12000
        const randomLimit = Math.floor(Math.random() * (12000 - 2500 + 1)) + 2500;
        limitAmount.innerText = `Ksh ${randomLimit.toLocaleString()}`;

        // Save to localStorage
        localStorage.setItem("loanData", JSON.stringify({ amount: randomLimit }));
      } else {
        progress += Math.floor(Math.random() * 10) + 5;
        if (progress > 100) progress = 100;
        percent.innerText = `${progress}%`;
        progressBar.style.width = `${progress}%`;
      }
    }, 200);

    function proceed() {
      window.location.href = "loan.html";
    }
  </script>
</body>
</html>
